"use strict";var org;!function(t){let e;!function(t){let e;!function(s){(e=t.buffer||(t.buffer={})).Reader=class{constructor(t,e="utf-8"){this.buffer=t,this.offset=0,this.dataView=new DataView(t),this.textDecoder=new TextDecoder(e)}get int8(){const t=this.dataView.getInt8(this.offset);return this.offset+=1,t}get uint8(){const t=this.dataView.getUint8(this.offset);return this.offset+=1,t}get int16(){const t=this.dataView.getInt16(this.offset);return this.offset+=2,t}get int32(){const t=this.dataView.getInt32(this.offset);return this.offset+=4,t}get float32(){const t=this.dataView.getFloat32(this.offset);return this.offset+=4,t}get float64(){const t=this.dataView.getFloat64(this.offset);return this.offset+=8,t}get bool(){const t=this.dataView.getUint8(this.offset);return this.offset+=1,1==t}get bytes(){const t=this.int32,e=this.buffer.slice(this.offset,this.offset+t);return this.offset+=t,e}get string(){const t=this.int32,e=this.textDecoder.decode(new Uint8Array(this.buffer,this.offset,t));return this.offset+=t,e}get tinyString(){const t=this.uint8,e=this.textDecoder.decode(new Uint8Array(this.buffer,this.offset,t));return this.offset+=t,e}}}()}(e=t.chickenbox||(t.chickenbox={}))}(org||(org={})),function(t){let e;!function(t){let e;!function(s){(e=t.buffer||(t.buffer={})).Util=class{static readFrom(t,e){const s=new XMLHttpRequest;s.open("GET",t,!0),s.responseType="arraybuffer",s.onreadystatechange=(()=>{switch(s.readyState){case 4:switch(s.status){case 200:var t;const i=s.getResponseHeader("Last-Modified");i&&(t=new Date(Date.parse(i))),e(s.response,t);break;default:e()}}}),s.onerror=(()=>{e()}),s.onload=(()=>{switch(s.status){case 404:e()}}),s.send()}}}()}(e=t.chickenbox||(t.chickenbox={}))}(org||(org={})),Object.defineProperty(ArrayBuffer,"chickenbox",{get:function(){return org.chickenbox.buffer.Util}}),function(t){let e;!function(t){let e;!function(t){t.Writer=class{constructor(t=1,e="utf-8"){this._offset=0,this._buffer=new ArrayBuffer(t),this.dataView=new DataView(this._buffer),this.textEncoder=new TextEncoder(e)}get buffer(){return this._buffer}get length(){return this._offset}resize(t){if(this._buffer.byteLength!=t){const e=new ArrayBuffer(t);new Uint8Array(e).set(new Uint8Array(this._buffer)),this._buffer=e,this.dataView=new DataView(e)}}enlargeBy(t){for(var e=this._buffer.byteLength;e<this._offset+t;)e*=2;this.resize(e)}reset(){this._offset=0}writeInt8(t){this.enlargeBy(1),this.dataView.setInt8(this._offset,t),this._offset+=1}writeUint8(t){this.enlargeBy(1),this.dataView.setUint8(this._offset,t),this._offset+=1}writeInt16(t){this.enlargeBy(2),this.dataView.setInt16(this._offset,t),this._offset+=2}writeInt32(t){this.enlargeBy(4),this.dataView.setInt32(this._offset,t),this._offset+=4}writeFloat32(t){this.enlargeBy(4),this.dataView.setFloat32(this._offset,t),this._offset+=4}writeFloat64(t){this.enlargeBy(8),this.dataView.setFloat64(this._offset,t),this._offset+=8}writeBool(t){this.enlargeBy(1),this.dataView.setUint8(this._offset,t?1:0),this._offset+=1}writeBytes(t,e=!0){e&&this.writeInt32(t.byteLength),this.enlargeBy(t.byteLength),new Uint8Array(this._buffer,this._offset,t.byteLength).set(t),this._offset+=t.byteLength}writeTinyString(t){const e=this.textEncoder.encode(t);this.writeUint8(e.byteLength),this.enlargeBy(e.byteLength),new Uint8Array(this._buffer,this._offset,e.byteLength).set(e),this._offset+=e.byteLength}writeString(t){this.writeBytes(this.textEncoder.encode(t))}}}(e=t.buffer||(t.buffer={}))}(e=t.chickenbox||(t.chickenbox={}))}(org||(org={}));